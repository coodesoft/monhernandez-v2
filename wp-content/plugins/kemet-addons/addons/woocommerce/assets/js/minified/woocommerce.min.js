!function(d){"use strict";var t=d(".kmt-woo-filter"),e=d("#kmt-off-canvas-wrap"),a=d(".kmt-off-canvas-sidebar");d(document).off("click",".kmt-off-canvas-overlay, .kmt-close-filter").on("click",".kmt-off-canvas-overlay, .kmt-close-filter",function(t){t.preventDefault(),e.removeClass("side-off-canvas-filter"),a.removeClass("side-off-canvas-filter")}),t.click(function(t){t.preventDefault(),e.addClass("side-off-canvas-filter"),a.addClass("side-off-canvas-filter")});function o(){var t=d("div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)").find(".qty");0<t.length&&"date"!==t.prop("type")&&"hidden"!==t.prop("type")&&(t.parent().addClass("buttons_added"),t.before('<a href="javascript:void(0)" class="minus" >-</a>'),t.after('<a href="javascript:void(0)" class="plus" >+</a>'),d(".plus, .minus").unbind("click"),d("form.cart , .woocommerce-cart-form").on("click",".plus, .minus",function(t){t.preventDefault();var e=d(this).closest(".quantity , td.product-quantity").find(".qty"),a=parseFloat(e.val()),o=parseFloat(e.attr("max")),s=parseFloat(e.attr("min")),i=parseFloat(e.attr("step"));a&&""!==a&&"NaN"!==a||(a=0),""!==o&&"NaN"!==o||(o=""),""!==s&&"NaN"!==s||(s=0),"any"!==i&&""!==i&&void 0!==i&&"NaN"!==parseFloat(i)||(i=1),d(this).is(".plus")?o&&o<=a?e.val(o):e.val(a+i):s&&a<=s?e.val(s):1<=a&&e.val(a-i),e.trigger("change")}))}var s={init:function(){var a=this,t="",e=d(".kmt-toolbar .shop-list-style");""==(t=kemet.is_shop?a.getCookie("kemet_shop_layout"):a.getCookie("kemet_single_product_layout"))||"undefined"==t||kemet.in_customizer||a.defaultStyle(t),e.find("a").click(function(t){var e=d(this);t.preventDefault(),a.loadAjax(e)})},loadAjax:function(e){if(!e.hasClass("active")){var a=d("body"),o=e.data("layout"),s=e.siblings("a").data("layout"),i=d(".kmt-woocommerce-container .products"),t=kemet.shop_load_layout_style||"",n="";switch(o){case"hover-style":n="kemet_hover_style_post_ajax";break;case"shop-grid":n="kemet_product_default_style";break;case"shop-list":n="kemet_list_post_ajax"}var r={action:n,query:kemet.query_vars,nonce:t};e.addClass("active"),e.siblings().removeClass("active"),d.ajax({url:kemet.ajax_url,data:r,type:"POST",beforeSend:function(t){i.addClass("load-ajax")},success:function(t){t&&(i.html(t),e.addClass("active"),e.siblings().removeClass("active"),a.addClass(o),a.removeClass(s),i.removeClass("load-ajax")),Cookies.set("kemet_shop_layout",o,{expires:.1,path:"/"})}})}},getCookie:function(t){for(var e=t+"=",a=decodeURIComponent(document.cookie).split(";"),o=0;o<a.length;o++){for(var s=a[o];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(e))return s.substring(e.length,s.length)}return""},defaultStyle:function(t){var e=t,a=d("body");switch(d(".kmt-toolbar").find("a").each(function(){var t=d(this);t.data("layout")==e&&(t.addClass("active"),t.siblings().removeClass("active"),0)}),e){case"hover-style":a.removeClass("shop-grid shop-list");break;case"shop-grid":a.removeClass("hover-style shop-list");break;case"shop-list":a.removeClass("hover-style shop-grid")}a.addClass(e)}};d(function(){s.init()}),d(window).ready(function(){o()}),d(document).ajaxComplete(function(){o()});d("body").hasClass("archive")&&d("body").hasClass("woocommerce")&&function(){var t=kemet.pagination_style,a=parseInt(kemet.shop_infinite_total)||"",o=parseInt(kemet.shop_infinite_count)||"",s=kemet.ajax_url||"",i=!0,n=d(".kmt-infinite-scroll-dots"),r=d(".infinite-scroll-end-msg"),e=d(".kmt-toolbar .shop-list-style"),l=kemet.shop_infinite_nonce||"";if(e.find("a").on("click",function(t){d(this).hasClass("active")||(o=parseInt(kemet.shop_infinite_count)||"",r.hide())}),typeof t&&"infinite-scroll"==t){if("undefined"!=typeof wp&&void 0!==wp.customize)return;if(0<d("#main").find(".product:last").length){var c=jQuery(window).outerHeight()/1.25;d(window).scroll(function(){if(d(window).scrollTop()+c>=d("#main").find(".product:last").offset().top){if(a<o)return!1;1==i&&(function(t){n.show();var e={action:"kemet_infinite_scroll",page_no:t,nonce:l,query_vars:kemet.query_vars};d.post(s,e,function(t){var e=d(t);d("#main > .kmt-woocommerce-container ul.products").append(e),n.hide(),a<o&&r.show(),i=!0})}(o),o++,i=!1)}})}}}()}(jQuery);