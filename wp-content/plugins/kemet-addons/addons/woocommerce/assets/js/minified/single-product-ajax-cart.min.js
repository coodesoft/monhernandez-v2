!function(c){if("undefined"==typeof kemet)return;KmtSingleProductAjax={init:function(){this._bind()},_bind:function(){c(document.body).on("click","#kmt-qv-content .product:not(.product-type-external) button.single_add_to_cart_button",KmtSingleProductAjax._addToCartRequest),kemet.single_ajax_add_to_cart&&c(document).on("click","body.single-product .product:not(.product-type-external) button.single_add_to_cart_button",KmtSingleProductAjax._addToCartRequest),c(document.body).on("added_to_cart",KmtSingleProductAjax._updateButton)},_addToCartRequest:function(t){t.preventDefault();var a=c(this).closest("form");if(!a[0].checkValidity())return a[0].reportValidity(),!1;var e=c(this),d=c(this).val();if(!e.hasClass("disabled")){e.removeClass("added"),e.addClass("loading");var r=c('input[name="quantity"]').val();if(c(".woocommerce-grouped-product-list-item").length){var o=c("input.qty");r=[];c.each(o,function(t,a){var e=c(this).attr("name");e=(e=e.replace("quantity[","")).replace("]",""),e=parseInt(e),c(this).val()&&(r[e]=c(this).val())})}var n=c("form.cart").serialize();c.ajax({url:kemet.ajax_url,type:"POST",data:"action=kemet_add_cart_single_product&add-to-cart="+d+"&"+n,success:function(t){c(document.body).trigger("wc_fragment_refresh"),c(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,e]),"yes"!==wc_add_to_cart_params.cart_redirect_after_add||(window.location=wc_add_to_cart_params.cart_url)}})}},_updateButton:function(t,a,e,d){d=void 0!==d&&d,c("button.single_add_to_cart_button").length&&(c(d).removeClass("loading"),c(d).addClass("added"),kemet.is_cart||0!==c(d).parent().find(".added_to_cart").length||c(d).after(' <a href="'+kemet.cart_url+'" class="added_to_cart wc-forward" title="'+kemet.view_cart+'">'+kemet.view_cart+"</a>"),c(document.body).trigger("wc_cart_button_updated",[d]))}},c(function(){KmtSingleProductAjax.init()})}(jQuery);